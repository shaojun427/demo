<!--{{extend ("solution://base/index.xtpl")}}-->
<!--{{extend ("solution://base/index.xtpl")}}-->
<!--{{#block("body")}}-->
<head>
    <title>找森叶或无疆</title>
    <!--<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>-->
</head>
<body style="background-color: rgba(200,200,200,0)">
<canvas id="myCanvas">your browser does not support the canvas tag </canvas>
<script type="text/javascript" src="//g.alicdn.com/mtb/lib-windvane/2.1.8/windvane.js"></script>
<script type="text/javascript" src="//f.alicdn.com/jquery/2.2.1/jquery.js"></script>
<script src="//g.alicdn.com/hybrid/api/4.0.8/hybrid.min.js"></script>
<script src="//g.alicdn.com/tmapp/tida/3.2.137/tida.js?appkey=24763302"></script>
<script src="//g.alicdn.com/zebra-solution/maoning/4.0.32/??vconsole.min.js,vconsole-elements.min.js,vconsole-resources.min.js"></script>

<script type="text/javascript">
    $(function(){
        // 启动页面时候需要绑定业务ID

        // 加载页面时候需要关闭相机，避免刷新时候相机有问题
        window.WindVane.call("AR", "scanCloseCamera", {},function(e){
            // alert(JSON.stringify(e));
            console.log(e.targetInfo.tag);
        });

        document.addEventListener('AR.updateModelTrackingState', function(e){
            console.log(e);
            console.log(JSON.stringify(e));
        }, false);

        $("#AR_Go-close").click(function(){
            window.WindVane.call("AR", "scanCloseCamera", {},function(e){
                console.log(JSON.stringify(e));
            });
        });

        $("#AR_Go-open").click(function(){
            window.WindVane.call("AR", "scanOpenCamera", {},function(e){
                console.log(JSON.stringify(e));
            },function(e){
                console.log(JSON.stringify(e));
            });
        });

        $("#AR_Go-scan").click(function(){
            window.WindVane.call("AR", "startScan", {"productId":"tmallARScan","paramtest":"test","timeout":20000},function(e){
                // alert(e.targetInfo.tag+'\n'+JSON.stringify(e.dispatchContent));
                console.log(e.targetInfo.tag);
                document.getElementById('xxx').src = 'data:image/jpeg;base64,'+e.previewData;
                window.WindVane.call("Base", "openWindow", {"url":''+e.dispatchContent.url},function(e){});
            },function(e){
                // alert(JSON.stringify(e));
                console.log(e.targetInfo.tag);
            });
        });

        $("#AR_Go-oreo").click(function(){
            window.WindVane.call("AR", "startScan", {"productId":"paintDetect","timeout":20000},function(e){
                // alert(JSON.stringify(e));
                // alert(e.targetInfo.tag);
                console.log(e.targetInfo.tag);
            });
        });

        $("#AR_Go-scan-hide").click(function(){
            window.WindVane.call("AR", "startScan", {"productId":"tmallARScan","hideFrame":"true","timeout":20000},function(e){
                // alert(JSON.stringify(e));
                // alert(e.targetInfo.tag);
                console.log(e.targetInfo.tag);
            });
        });

        $("#AR_Go-scan-quality100").click(function(){
            window.WindVane.call("AR", "startScan", {"productId":"tmallObjectReco", "quality":100, "timeout":20000},function(e){
                // alert(JSON.stringify(e));
                console.log(e.targetInfo.tag+'\n'+e.targetInfo.imgId);
                document.getElementById('xxx').src = 'data:image/jpeg;base64,'+e.previewData;
            });
        });

        $("#AR-scan-obj").click(function(){
            window.WindVane.call("AR", "startScan", {"productId":"aliworkARScan", "timeout":20000},function(e){
                console.log(e.targetInfo.tag+'\n'+JSON.stringify(e.dispatchContent));
            });
        });

        $("#AR-scan-middle").click(function(){
            window.WindVane.call("AR", "startScan", {"productId":"tmallARScan","hideFrame":"false","frameWidthRelativeToPreview":0.6,"frameAspectRatio":1.0, "timeout":20000},function(e){
                console.log(JSON.stringify(e));
            });
        });

        $("#AR_Go-stopScan").click(function(){
            window.WindVane.call("AR", "stopScan", {},function(e){
                console.log(JSON.stringify(e));
            });
        });

        $("#AR_Go-scan-small").click(function(){
            window.WindVane.call("AR", "startScan", {"productId":"tmallARScan","hideFrame":"false","frameWidthRelativeToPreview":0.6,"frameAspectRatio":0.8, "timeout":20000},function(e){
                alert(e.targetInfo.tag);
                document.getElementById('xxx').src = 'data:image/jpeg;base64,'+e.previewData;

            });
        });

        $("#AR-scan-letterReco").click(function(){
            window.WindVane.call("AR", "startScan", {"productId":"letterReco","reliability":0.7,"frameWidthRelativeToPreview":0.33,"frameAspectRatio":1.33,"timeout":20000},function(e){
                alert(e.targetInfo.tag);
            });
        });

        $("#AR_Go-car").click(function(){
            window.WindVane.call("AR", "startScan", {"productId":"letterReco","reliability":0.95,"timeout":20000},function(e){
                alert(e.targetInfo.tag);
                // document.getElementById('xxx').src = 'data:image/jpeg;base64,'+e.previewData;
            });
        });

        $("#AR_Go-screenshot").click(function(){
            // window.WindVane.call("AR", "scanOpenCamera", {},function(e){

            // });
            share();
        });

        $("#AR_Go-screenshot-path").click(function(){
            // window.WindVane.call("AR", "scanOpenCamera", {},function(e){

            // });
            sharePath();


        });
        
        $("#A3D_JS").click(function(){
             a3djs();
        });

        $("#ARScanPlugin-closePage").click(function(){
            window.WindVane.call("ARScanPlugin", "closePage", {},function(e){
                // console.log(e);
                alert(JSON.stringify(e));
            });

        });

    });

    function share() {
        // window.WindVane.call("AR", "screenshot", {"rawData": true}, function (e) {
        //     // alert(e.path)
        //     alert(JSON.stringify(e));
        //     document.getElementById('xxx').src = 'data:image/jpeg;base64,' + e.rawData;
        //     // alert(e.rawData);
        //     // Ali.share({
        //     //     title: '标题是我要截屏分享',
        //     //     text: '内容看看截屏有没有带上',
        //     //     targets: [5],
        //     //     image: e.path,
        //     //     url: location.href
        //     // })

        // });
        Tida.AR.screenshot({"rawData": "true"}, function (reslut) {
            document.getElementById('xxx').src = 'data:image/jpeg;base64,' + reslut.rawData;
            alert("tida "+JSON.stringify(reslut));
        });
    }

    function sharePath(){
        window.WindVane.call("AR", "screenshot", {"rawData":false},function(e){

            Ali.share({
                title: '标题是我要截屏分享',
                text: '内容看看截屏有没有带上',
                targets: [5],
                image: e.path,
                url: location.href
            });

        });
    }
    
    function a3djs(){
        window.WindVane.call("A3DHybrid", "a3djs", {"javaScriptString":"../giraffe/main.js"},function(e){
                alert(e.targetInfo.tag);
            });

        // });
    }

</script>

<center>
    <div>
        <input id="AR_Go-open" type="button" value="AR-open" style="width:200px;height:100px;font-size:25px">
    </div>
    <div>
        <input id="AR_Go-scan" type="button" value="AR-scan" style="width:200px;height:100px;font-size:25px">
    </div>
    <!--<div>-->
    <!-- <input id="AR_Go-debug" type="button" value="AR_Go-debug" style="width:200px;height:100px;font-size:25px">-->
    <!--</div>-->
    <div>
        <input id="AR_Go-scan-quality100" type="button" value="AR_Go-scan-quality100" style="width:200px;height:100px;font-size:25px">
    </div>
    <div>
        <input id="AR_Go-car" type="button" value="AR-car" style="width:220px;height:100px;font-size:25px">
    </div>
    <!--<div>-->
    <!-- <input id="AR-scan-middle" type="button" value="AR-scan-middle" style="width:220px;height:100px;font-size:25px">-->
    <!--</div>-->
    <div>
     <input id="AR-scan-obj" type="button" value="AR-scan-obj" style="width:220px;height:100px;font-size:25px">
    </div>
    <div>
        <input id="AR-scan-letterReco" type="button" value="AR-scan-letterReco" style="width:200px;height:100px;font-size:25px">
    </div>
    <!--<div>-->
    <!-- <input id="AR_Go-stopScan" type="button" value="AR_Go-stopScan" style="width:200px;height:100px;font-size:25px">-->
    <!--</div>-->
    <div>
        <input id="AR_Go-close" type="button" value="AR-closeCamera" style="width:200px;height:100px;font-size:25px">
    </div>
    <div>
        <input id="AR_Go-screenshot" type="button" value="截屏要原图" style="width:200px;height:100px;font-size:25px">
    </div>
    <div>
        <input id="AR_Go-screenshot-path" type="button" value="截屏要路径" style="width:200px;height:100px;font-size:25px">
    </div>
    <div>
        <input id="A3D_JS" type="button" value="A3D_JS测试" style="width:200px;height:100px;font-size:25px">
    </div>
    <!--<div>-->
    <!-- <input id="ARScanPlugin-closePage" type="button" value="ARScanPlugin-closePage" style="width:200px;height:100px;font-size:25px">-->
    <!--</div>-->
    <img id='xxx' width="33%">
</center>
</body>
<!--{{/block}}-->